<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gestão Agropecuária</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #2e7d32;
            --primary-light: #4caf50;
            --primary-dark: #1b5e20;
            --secondary: #ff9800;
            --light: #f5f5f5;
            --dark: #333;
            --gray: #757575;
            --danger: #d32f2f;
            --success: #388e3c;
            --warning: #f57c00;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        html, body {
            height: 100%;
        }

        body {
            background-color: #f0f4f0;
            color: var(--dark);
            line-height: 1.6;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header */
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem 0;
            box-shadow: var(--shadow);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .logo i {
            font-size: 1.8rem;
        }

        .logo h1 {
            font-size: 1.5rem;
            font-weight: 600;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
        }

        nav a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 4px;
            transition: background-color 0.3s;
        }

        nav a:hover, nav a.active {
            background-color: var(--primary-dark);
        }

        /* Main Content */
        main {
            padding: 2rem 0;
            flex: 1;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }

        .card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card i {
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 1rem;
        }

        .card h3 {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .card p {
            color: var(--gray);
            font-size: 0.9rem;
        }

        /* Section Tabs */
        .section-tabs {
            display: flex;
            background: white;
            border-radius: 8px 8px 0 0;
            overflow: hidden;
            box-shadow: var(--shadow);
        }

        .tab {
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: background-color 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab:hover {
            background-color: #f5f5f5;
        }

        .tab.active {
            background-color: #f5f5f5;
            border-bottom: 3px solid var(--primary);
            font-weight: 600;
        }

        /* Content Area */
        .content-area {
            background: white;
            padding: 2rem;
            border-radius: 0 0 8px 8px;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .section-header h2 {
            color: var(--primary);
            font-size: 1.5rem;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #e68900;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background-color: #b71c1c;
        }

        /* Table */
        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1rem;
        }

        th, td {
            padding: 0.75rem;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background-color: #f5f5f5;
            font-weight: 600;
            color: var(--dark);
        }

        tr:hover {
            background-color: #f9f9f9;
        }

        .actions {
            display: flex;
            gap: 5px;
        }

        .actions button {
            padding: 0.25rem 0.5rem;
            font-size: 0.8rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .modal-header h2 {
            color: var(--primary);
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--gray);
        }

        .close-btn:hover {
            color: var(--dark);
        }

        /* Forms */
        .form-container {
            width: 100%;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        input, select, textarea {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 2px rgba(46, 125, 50, 0.2);
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 1.5rem;
            padding-top: 1rem;
            border-top: 1px solid #eee;
        }

        /* Footer */
        footer {
            background-color: var(--primary-dark);
            color: white;
            text-align: center;
            padding: 1.5rem 0;
            margin-top: auto;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            .dashboard {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .section-tabs {
                flex-wrap: wrap;
            }

            .tab {
                flex: 1;
                text-align: center;
                min-width: 120px;
            }

            .form-actions {
                flex-direction: column;
            }

            .form-actions button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-tractor"></i>
                    <h1>Gestão Agropecuária</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="#" class="active" data-page="dashboard">Dashboard</a></li>
                        <li><a href="#" data-page="relatorios">Relatórios</a></li>
                        <li><a href="#" data-page="configuracoes">Configurações</a></li>
                        <li><a href="#" data-page="ajuda">Ajuda</a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </header>

    <main class="container">
        <!-- Dashboard Section -->
        <section id="dashboard" class="page-content active">
            <section class="dashboard">
                <div class="card">
                    <i class="fas fa-money-bill-wave"></i>
                    <h3>Lançamentos</h3>
                    <p>Gerencie receitas e custos</p>
                </div>
                <div class="card">
                    <i class="fas fa-cow"></i>
                    <h3>Animais</h3>
                    <p>Controle do rebanho</p>
                </div>
                <div class="card">
                    <i class="fas fa-seedling"></i>
                    <h3>Pastagens</h3>
                    <p>Gerencie áreas de pasto</p>
                </div>
                <div class="card">
                    <i class="fas fa-chart-line"></i>
                    <h3>Relatórios</h3>
                    <p>Análises e métricas</p>
                </div>
            </section>

            <div class="section-tabs">
                <div class="tab active" data-tab="lancamentos">Lançamentos Financeiros</div>
                <div class="tab" data-tab="animais">Animais</div>
                <div class="tab" data-tab="rebanhos">Rebanhos</div>
                <div class="tab" data-tab="pastagens">Pastagens</div>
                <div class="tab" data-tab="movimentacoes">Movimentações</div>
            </div>

            <div class="content-area">
                <!-- Lançamentos Financeiros -->
                <div id="lancamentos" class="tab-content active">
                    <div class="section-header">
                        <h2>Lançamentos Financeiros</h2>
                        <button class="btn btn-primary" id="addLancamento">
                            <i class="fas fa-plus"></i> Novo Lançamento
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="lancamentosTable">
                            <thead>
                                <tr>
                                    <th>Tipo</th>
                                    <th>Categoria</th>
                                    <th>Valor</th>
                                    <th>Data</th>
                                    <th>Animal</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Animais -->
                <div id="animais" class="tab-content">
                    <div class="section-header">
                        <h2>Animais</h2>
                        <button class="btn btn-primary" id="addAnimal">
                            <i class="fas fa-plus"></i> Novo Animal
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="animaisTable">
                            <thead>
                                <tr>
                                    <th>Código</th>
                                    <th>Sexo</th>
                                    <th>Nascimento</th>
                                    <th>Peso</th>
                                    <th>Raça</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Rebanhos -->
                <div id="rebanhos" class="tab-content">
                    <div class="section-header">
                        <h2>Rebanhos</h2>
                        <button class="btn btn-primary" id="addRebanho">
                            <i class="fas fa-plus"></i> Novo Rebanho
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="rebanhosTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Capacidade</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Pastagens -->
                <div id="pastagens" class="tab-content">
                    <div class="section-header">
                        <h2>Pastagens</h2>
                        <button class="btn btn-primary" id="addPastagem">
                            <i class="fas fa-plus"></i> Nova Pastagem
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="pastagensTable">
                            <thead>
                                <tr>
                                    <th>Nome</th>
                                    <th>Área (ha)</th>
                                    <th>Capacidade</th>
                                    <th>Status</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Movimentações -->
                <div id="movimentacoes" class="tab-content">
                    <div class="section-header">
                        <h2>Movimentações de Animais</h2>
                        <button class="btn btn-primary" id="addMovimentacao">
                            <i class="fas fa-plus"></i> Nova Movimentação
                        </button>
                    </div>
                    <div class="table-container">
                        <table id="movimentacoesTable">
                            <thead>
                                <tr>
                                    <th>Animal</th>
                                    <th>Pastagem</th>
                                    <th>Entrada</th>
                                    <th>Saída</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Dados serão inseridos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Relatórios Section -->
        <section id="relatorios" class="page-content">
            <div class="content-area">
                <div class="section-header">
                    <h2>Relatórios</h2>
                </div>
                <div class="dashboard">
                    <div class="card">
                        <i class="fas fa-chart-bar"></i>
                        <h3>Relatório Financeiro</h3>
                        <p>Análise de receitas e custos</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-download"></i> Gerar Relatório
                        </button>
                    </div>
                    <div class="card">
                        <i class="fas fa-cow"></i>
                        <h3>Inventário Animal</h3>
                        <p>Relatório completo do rebanho</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-download"></i> Gerar Relatório
                        </button>
                    </div>
                    <div class="card">
                        <i class="fas fa-seedling"></i>
                        <h3>Uso de Pastagens</h3>
                        <p>Ocupação e capacidade</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-download"></i> Gerar Relatório
                        </button>
                    </div>
                    <div class="card">
                        <i class="fas fa-exchange-alt"></i>
                        <h3>Movimentações</h3>
                        <p>Histórico de transferências</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-download"></i> Gerar Relatório
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Configurações Section -->
        <section id="configuracoes" class="page-content">
            <div class="content-area">
                <div class="section-header">
                    <h2>Configurações do Sistema</h2>
                </div>
                <div class="form-container">
                    <form id="configForm">
                        <div class="form-group">
                            <label for="nomeFazenda">Nome da Fazenda</label>
                            <input type="text" id="nomeFazenda" value="Fazenda Esperança" required>
                        </div>
                        <div class="form-group">
                            <label for="proprietario">Proprietário</label>
                            <input type="text" id="proprietario" value="João Silva" required>
                        </div>
                        <div class="form-group">
                            <label for="email">E-mail</label>
                            <input type="email" id="email" value="contato@fazendaesperanca.com" required>
                        </div>
                        <div class="form-group">
                            <label for="telefone">Telefone</label>
                            <input type="tel" id="telefone" value="(11) 99999-9999" required>
                        </div>
                        <div class="form-group">
                            <label for="endereco">Endereço</label>
                            <textarea id="endereco" rows="3">Rodovia BR-101, Km 245, Zona Rural</textarea>
                        </div>
                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">Salvar Configurações</button>
                        </div>
                    </form>
                </div>
            </div>
        </section>

        <!-- Ajuda Section -->
        <section id="ajuda" class="page-content">
            <div class="content-area">
                <div class="section-header">
                    <h2>Central de Ajuda</h2>
                </div>
                <div class="dashboard">
                    <div class="card">
                        <i class="fas fa-book"></i>
                        <h3>Documentação</h3>
                        <p>Manual completo do sistema</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-book-open"></i> Acessar
                        </button>
                    </div>
                    <div class="card">
                        <i class="fas fa-video"></i>
                        <h3>Vídeo Tutoriais</h3>
                        <p>Aprenda com exemplos práticos</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-play-circle"></i> Assistir
                        </button>
                    </div>
                    <div class="card">
                        <i class="fas fa-question-circle"></i>
                        <h3>FAQ</h3>
                        <p>Perguntas frequentes</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-search"></i> Consultar
                        </button>
                    </div>
                    <div class="card">
                        <i class="fas fa-headset"></i>
                        <h3>Suporte</h3>
                        <p>Fale com nossa equipe</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;">
                            <i class="fas fa-envelope"></i> Contatar
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2023 Sistema de Gestão Agropecuária. Todos os direitos reservados.</p>
        </div>
    </footer>

    <!-- Modal para formulários -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Novo Registro</h2>
                <button class="close-btn" id="closeModal">&times;</button>
            </div>
            <div id="modalBody">
                <!-- Conteúdo do formulário será inserido aqui -->
            </div>
        </div>
    </div>

    <script>
        // Dados de exemplo para demonstração
        let sampleData = {
            lancamentos: [
                { id: 1, tipo: "CUSTO", categoria: "Alimentação", valor: 1500.00, data_movimento: "2023-05-15", animal: "Boi-001", descricao: "Compra de ração" },
                { id: 2, tipo: "RECEITA", categoria: "Venda", valor: 3200.00, data_movimento: "2023-05-20", animal: "Vaca-005", descricao: "Venda de animal" },
                { id: 3, tipo: "CUSTO", categoria: "Medicamentos", valor: 450.00, data_movimento: "2023-05-22", animal: null, descricao: "Vacinas" }
            ],
            animais: [
                { id: 1, codigo_brincos: "Boi-001", sexo: "M", nascimento: "2020-03-10", peso_atual: 450.5, raca: "Nelore", status: "ativo", rebanho_id: 1 },
                { id: 2, codigo_brincos: "Vaca-005", sexo: "F", nascimento: "2019-07-22", peso_atual: 380.0, raca: "Angus", status: "ativo", rebanho_id: 2 },
                { id: 3, codigo_brincos: "Bez-012", sexo: "F", nascimento: "2023-01-15", peso_atual: 120.0, raca: "Nelore", status: "ativo", rebanho_id: 1 }
            ],
            rebanhos: [
                { id: 1, nome_lote: "Lote de Engorda", capacidade: 100, ativo: true },
                { id: 2, nome_lote: "Lote de Cria", capacidade: 50, ativo: true },
                { id: 3, nome_lote: "Lote de Descanso", capacidade: 30, ativo: false }
            ],
            pastagens: [
                { id: 1, nome: "Pastagem Norte", area: 25.5, capacidade_suporte: 80, ativo: true },
                { id: 2, nome: "Pastagem Sul", area: 18.0, capacidade_suporte: 60, ativo: true },
                { id: 3, nome: "Pastagem Oeste", area: 12.5, capacidade_suporte: 40, ativo: false }
            ],
            movimentacoes: [
                { id: 1, animal_id: 1, pastagem_id: 1, data_entrada: "2023-05-01", data_saida: null },
                { id: 2, animal_id: 2, pastagem_id: 2, data_entrada: "2023-05-10", data_saida: "2023-05-20" },
                { id: 3, animal_id: 3, pastagem_id: 3, data_entrada: "2023-05-15", data_saida: null }
            ]
        };

        // Elementos DOM
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const modal = document.getElementById('modal');
        const modalTitle = document.getElementById('modalTitle');
        const modalBody = document.getElementById('modalBody');
        const closeModal = document.getElementById('closeModal');
        const navLinks = document.querySelectorAll('nav a');
        const pageContents = document.querySelectorAll('.page-content');

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar dados iniciais
            loadTableData('lancamentos', sampleData.lancamentos);
            loadTableData('animais', sampleData.animais);
            loadTableData('rebanhos', sampleData.rebanhos);
            loadTableData('pastagens', sampleData.pastagens);
            loadTableData('movimentacoes', sampleData.movimentacoes);

            // Configurar eventos de tabs
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.getAttribute('data-tab');
                    activateTab(tabId);
                });
            });

            // Configurar eventos dos botões de adicionar
            document.getElementById('addLancamento').addEventListener('click', () => showLancamentoForm());
            document.getElementById('addAnimal').addEventListener('click', () => showAnimalForm());
            document.getElementById('addRebanho').addEventListener('click', () => showRebanhoForm());
            document.getElementById('addPastagem').addEventListener('click', () => showPastagemForm());
            document.getElementById('addMovimentacao').addEventListener('click', () => showMovimentacaoForm());

            // Configurar eventos de navegação
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.getAttribute('data-page');
                    activatePage(pageId);
                });
            });

            // Configurar formulário de configurações
            document.getElementById('configForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('Configurações salvas com sucesso!');
            });

            // Fechar modal
            closeModal.addEventListener('click', () => {
                modal.style.display = 'none';
            });

            // Fechar modal ao clicar fora
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    modal.style.display = 'none';
                }
            });
        });

        // Funções de controle de páginas
        function activatePage(pageId) {
            // Desativar todas as páginas e links
            pageContents.forEach(content => content.classList.remove('active'));
            navLinks.forEach(link => link.classList.remove('active'));

            // Ativar página selecionada
            document.getElementById(pageId).classList.add('active');
            document.querySelector(`nav a[data-page="${pageId}"]`).classList.add('active');
        }

        // Funções de controle de tabs
        function activateTab(tabId) {
            // Desativar todas as tabs
            tabs.forEach(tab => tab.classList.remove('active'));
            tabContents.forEach(content => content.classList.remove('active'));

            // Ativar tab selecionada
            document.querySelector(`.tab[data-tab="${tabId}"]`).classList.add('active');
            document.getElementById(tabId).classList.add('active');
        }

        // Funções para carregar dados nas tabelas
        function loadTableData(tableId, data) {
            const tableBody = document.querySelector(`#${tableId}Table tbody`);
            if (!tableBody) return;
            
            tableBody.innerHTML = '';

            data.forEach(item => {
                const row = document.createElement('tr');
                
                switch(tableId) {
                    case 'lancamentos':
                        row.innerHTML = `
                            <td><span class="badge ${item.tipo === 'CUSTO' ? 'badge-danger' : 'badge-success'}">${item.tipo}</span></td>
                            <td>${item.categoria}</td>
                            <td>R$ ${item.valor.toFixed(2)}</td>
                            <td>${formatDate(item.data_movimento)}</td>
                            <td>${item.animal || '-'}</td>
                            <td class="actions">
                                <button class="btn btn-secondary" onclick="editLancamento(${item.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-danger" onclick="deleteLancamento(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        break;
                    case 'animais':
                        const rebanho = sampleData.rebanhos.find(r => r.id === item.rebanho_id);
                        row.innerHTML = `
                            <td>${item.codigo_brincos}</td>
                            <td>${item.sexo === 'M' ? 'Macho' : 'Fêmea'}</td>
                            <td>${formatDate(item.nascimento)}</td>
                            <td>${item.peso_atual ? `${item.peso_atual} kg` : '-'}</td>
                            <td>${item.raca || '-'}</td>
                            <td><span class="badge ${item.status === 'ativo' ? 'badge-success' : 'badge-secondary'}">${item.status}</span></td>
                            <td class="actions">
                                <button class="btn btn-secondary" onclick="editAnimal(${item.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-danger" onclick="deleteAnimal(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        break;
                    case 'rebanhos':
                        row.innerHTML = `
                            <td>${item.nome_lote}</td>
                            <td>${item.capacidade}</td>
                            <td><span class="badge ${item.ativo ? 'badge-success' : 'badge-secondary'}">${item.ativo ? 'Ativo' : 'Inativo'}</span></td>
                            <td class="actions">
                                <button class="btn btn-secondary" onclick="editRebanho(${item.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-danger" onclick="deleteRebanho(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        break;
                    case 'pastagens':
                        row.innerHTML = `
                            <td>${item.nome}</td>
                            <td>${item.area || '-'}</td>
                            <td>${item.capacidade_suporte || '-'}</td>
                            <td><span class="badge ${item.ativo ? 'badge-success' : 'badge-secondary'}">${item.ativo ? 'Ativa' : 'Inativa'}</span></td>
                            <td class="actions">
                                <button class="btn btn-secondary" onclick="editPastagem(${item.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-danger" onclick="deletePastagem(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        break;
                    case 'movimentacoes':
                        const animal = sampleData.animais.find(a => a.id === item.animal_id);
                        const pastagem = sampleData.pastagens.find(p => p.id === item.pastagem_id);
                        row.innerHTML = `
                            <td>${animal ? animal.codigo_brincos : 'N/A'}</td>
                            <td>${pastagem ? pastagem.nome : 'N/A'}</td>
                            <td>${formatDate(item.data_entrada)}</td>
                            <td>${item.data_saida ? formatDate(item.data_saida) : '-'}</td>
                            <td class="actions">
                                <button class="btn btn-secondary" onclick="editMovimentacao(${item.id})">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-danger" onclick="deleteMovimentacao(${item.id})">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        `;
                        break;
                }
                
                tableBody.appendChild(row);
            });
        }

        // Funções para mostrar formulários (mantidas as mesmas)
        function showLancamentoForm(lancamento = null) {
            const isEdit = lancamento !== null;
            const title = isEdit ? 'Editar Lançamento Financeiro' : 'Novo Lançamento Financeiro';
            
            modalTitle.textContent = title;
            modalBody.innerHTML = `
                <div class="form-container">
                    <form id="lancamentoForm">
                        <div class="form-group">
                            <label for="tipo">Tipo</label>
                            <select id="tipo" required>
                                <option value="">Selecione...</option>
                                <option value="CUSTO" ${isEdit && lancamento.tipo === 'CUSTO' ? 'selected' : ''}>Custo</option>
                                <option value="RECEITA" ${isEdit && lancamento.tipo === 'RECEITA' ? 'selected' : ''}>Receita</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="categoria">Categoria</label>
                            <input type="text" id="categoria" value="${isEdit ? lancamento.categoria : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="valor">Valor (R$)</label>
                            <input type="number" id="valor" step="0.01" min="0" value="${isEdit ? lancamento.valor : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="data_movimento">Data do Movimento</label>
                            <input type="date" id="data_movimento" value="${isEdit ? lancamento.data_movimento : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="animal">Animal (opcional)</label>
                            <select id="animal">
                                <option value="">Nenhum</option>
                                ${sampleData.animais.map(animal => 
                                    `<option value="${animal.id}" ${isEdit && lancamento.animal === animal.codigo_brincos ? 'selected' : ''}>
                                        ${animal.codigo_brincos}
                                    </option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="descricao">Descrição</label>
                            <textarea id="descricao" rows="3">${isEdit ? lancamento.descricao : ''}</textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="modal.style.display='none'">Cancelar</button>
                            <button type="submit" class="btn btn-primary">${isEdit ? 'Atualizar' : 'Salvar'}</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.getElementById('lancamentoForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const animalSelect = document.getElementById('animal');
                const selectedAnimalId = animalSelect.value;
                const selectedAnimal = sampleData.animais.find(a => a.id == selectedAnimalId);
                
                const newLancamento = {
                    id: isEdit ? lancamento.id : sampleData.lancamentos.length + 1,
                    tipo: document.getElementById('tipo').value,
                    categoria: document.getElementById('categoria').value,
                    valor: parseFloat(document.getElementById('valor').value),
                    data_movimento: document.getElementById('data_movimento').value,
                    animal: selectedAnimal ? selectedAnimal.codigo_brincos : null,
                    descricao: document.getElementById('descricao').value
                };
                
                if (isEdit) {
                    const index = sampleData.lancamentos.findIndex(l => l.id === lancamento.id);
                    sampleData.lancamentos[index] = newLancamento;
                } else {
                    sampleData.lancamentos.push(newLancamento);
                }
                
                loadTableData('lancamentos', sampleData.lancamentos);
                modal.style.display = 'none';
                alert(isEdit ? 'Lançamento atualizado com sucesso!' : 'Lançamento criado com sucesso!');
            });
            
            modal.style.display = 'flex';
        }

        function showAnimalForm(animal = null) {
            const isEdit = animal !== null;
            const title = isEdit ? 'Editar Animal' : 'Novo Animal';
            
            modalTitle.textContent = title;
            modalBody.innerHTML = `
                <div class="form-container">
                    <form id="animalForm">
                        <div class="form-group">
                            <label for="codigo_brincos">Código/Brinco</label>
                            <input type="text" id="codigo_brincos" value="${isEdit ? animal.codigo_brincos : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="sexo">Sexo</label>
                            <select id="sexo" required>
                                <option value="">Selecione...</option>
                                <option value="M" ${isEdit && animal.sexo === 'M' ? 'selected' : ''}>Macho</option>
                                <option value="F" ${isEdit && animal.sexo === 'F' ? 'selected' : ''}>Fêmea</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="nascimento">Data de Nascimento</label>
                            <input type="date" id="nascimento" value="${isEdit ? animal.nascimento : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="peso_atual">Peso Atual (kg)</label>
                            <input type="number" id="peso_atual" step="0.01" min="0" value="${isEdit ? animal.peso_atual || '' : ''}">
                        </div>
                        <div class="form-group">
                            <label for="raca">Raça</label>
                            <input type="text" id="raca" value="${isEdit ? animal.raca || '' : ''}">
                        </div>
                        <div class="form-group">
                            <label for="rebanho">Rebanho</label>
                            <select id="rebanho" required>
                                <option value="">Selecione...</option>
                                ${sampleData.rebanhos.map(rebanho => 
                                    `<option value="${rebanho.id}" ${isEdit && animal.rebanho_id === rebanho.id ? 'selected' : ''}>
                                        ${rebanho.nome_lote}
                                    </option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="status">Status</label>
                            <select id="status" required>
                                <option value="ativo" ${isEdit && animal.status === 'ativo' ? 'selected' : ''}>Ativo</option>
                                <option value="inativo" ${isEdit && animal.status === 'inativo' ? 'selected' : ''}>Inativo</option>
                                <option value="vendido" ${isEdit && animal.status === 'vendido' ? 'selected' : ''}>Vendido</option>
                            </select>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="modal.style.display='none'">Cancelar</button>
                            <button type="submit" class="btn btn-primary">${isEdit ? 'Atualizar' : 'Salvar'}</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.getElementById('animalForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newAnimal = {
                    id: isEdit ? animal.id : sampleData.animais.length + 1,
                    codigo_brincos: document.getElementById('codigo_brincos').value,
                    sexo: document.getElementById('sexo').value,
                    nascimento: document.getElementById('nascimento').value,
                    peso_atual: document.getElementById('peso_atual').value ? parseFloat(document.getElementById('peso_atual').value) : null,
                    raca: document.getElementById('raca').value,
                    rebanho_id: parseInt(document.getElementById('rebanho').value),
                    status: document.getElementById('status').value
                };
                
                if (isEdit) {
                    const index = sampleData.animais.findIndex(a => a.id === animal.id);
                    sampleData.animais[index] = newAnimal;
                } else {
                    sampleData.animais.push(newAnimal);
                }
                
                loadTableData('animais', sampleData.animais);
                modal.style.display = 'none';
                alert(isEdit ? 'Animal atualizado com sucesso!' : 'Animal criado com sucesso!');
            });
            
            modal.style.display = 'flex';
        }

        function showRebanhoForm(rebanho = null) {
            const isEdit = rebanho !== null;
            const title = isEdit ? 'Editar Rebanho' : 'Novo Rebanho';
            
            modalTitle.textContent = title;
            modalBody.innerHTML = `
                <div class="form-container">
                    <form id="rebanhoForm">
                        <div class="form-group">
                            <label for="nome_lote">Nome do Lote</label>
                            <input type="text" id="nome_lote" value="${isEdit ? rebanho.nome_lote : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="capacidade">Capacidade</label>
                            <input type="number" id="capacidade" min="1" value="${isEdit ? rebanho.capacidade : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="ativo">Status</label>
                            <select id="ativo" required>
                                <option value="true" ${isEdit && rebanho.ativo ? 'selected' : ''}>Ativo</option>
                                <option value="false" ${isEdit && !rebanho.ativo ? 'selected' : ''}>Inativo</option>
                            </select>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="modal.style.display='none'">Cancelar</button>
                            <button type="submit" class="btn btn-primary">${isEdit ? 'Atualizar' : 'Salvar'}</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.getElementById('rebanhoForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newRebanho = {
                    id: isEdit ? rebanho.id : sampleData.rebanhos.length + 1,
                    nome_lote: document.getElementById('nome_lote').value,
                    capacidade: parseInt(document.getElementById('capacidade').value),
                    ativo: document.getElementById('ativo').value === 'true'
                };
                
                if (isEdit) {
                    const index = sampleData.rebanhos.findIndex(r => r.id === rebanho.id);
                    sampleData.rebanhos[index] = newRebanho;
                } else {
                    sampleData.rebanhos.push(newRebanho);
                }
                
                loadTableData('rebanhos', sampleData.rebanhos);
                modal.style.display = 'none';
                alert(isEdit ? 'Rebanho atualizado com sucesso!' : 'Rebanho criado com sucesso!');
            });
            
            modal.style.display = 'flex';
        }

        function showPastagemForm(pastagem = null) {
            const isEdit = pastagem !== null;
            const title = isEdit ? 'Editar Pastagem' : 'Nova Pastagem';
            
            modalTitle.textContent = title;
            modalBody.innerHTML = `
                <div class="form-container">
                    <form id="pastagemForm">
                        <div class="form-group">
                            <label for="nome">Nome da Pastagem</label>
                            <input type="text" id="nome" value="${isEdit ? pastagem.nome : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="area">Área (hectares)</label>
                            <input type="number" id="area" step="0.01" min="0" value="${isEdit ? pastagem.area || '' : ''}">
                        </div>
                        <div class="form-group">
                            <label for="capacidade_suporte">Capacidade de Suporte</label>
                            <input type="number" id="capacidade_suporte" min="0" value="${isEdit ? pastagem.capacidade_suporte || '' : ''}">
                        </div>
                        <div class="form-group">
                            <label for="ativo">Status</label>
                            <select id="ativo" required>
                                <option value="true" ${isEdit && pastagem.ativo ? 'selected' : ''}>Ativa</option>
                                <option value="false" ${isEdit && !pastagem.ativo ? 'selected' : ''}>Inativa</option>
                            </select>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="modal.style.display='none'">Cancelar</button>
                            <button type="submit" class="btn btn-primary">${isEdit ? 'Atualizar' : 'Salvar'}</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.getElementById('pastagemForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newPastagem = {
                    id: isEdit ? pastagem.id : sampleData.pastagens.length + 1,
                    nome: document.getElementById('nome').value,
                    area: document.getElementById('area').value ? parseFloat(document.getElementById('area').value) : null,
                    capacidade_suporte: document.getElementById('capacidade_suporte').value ? parseInt(document.getElementById('capacidade_suporte').value) : null,
                    ativo: document.getElementById('ativo').value === 'true'
                };
                
                if (isEdit) {
                    const index = sampleData.pastagens.findIndex(p => p.id === pastagem.id);
                    sampleData.pastagens[index] = newPastagem;
                } else {
                    sampleData.pastagens.push(newPastagem);
                }
                
                loadTableData('pastagens', sampleData.pastagens);
                modal.style.display = 'none';
                alert(isEdit ? 'Pastagem atualizada com sucesso!' : 'Pastagem criada com sucesso!');
            });
            
            modal.style.display = 'flex';
        }

        function showMovimentacaoForm(movimentacao = null) {
            const isEdit = movimentacao !== null;
            const title = isEdit ? 'Editar Movimentação' : 'Nova Movimentação';
            
            modalTitle.textContent = title;
            modalBody.innerHTML = `
                <div class="form-container">
                    <form id="movimentacaoForm">
                        <div class="form-group">
                            <label for="animal_id">Animal</label>
                            <select id="animal_id" required>
                                <option value="">Selecione...</option>
                                ${sampleData.animais.map(animal => 
                                    `<option value="${animal.id}" ${isEdit && movimentacao.animal_id === animal.id ? 'selected' : ''}>
                                        ${animal.codigo_brincos}
                                    </option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="pastagem_id">Pastagem</label>
                            <select id="pastagem_id" required>
                                <option value="">Selecione...</option>
                                ${sampleData.pastagens.map(pastagem => 
                                    `<option value="${pastagem.id}" ${isEdit && movimentacao.pastagem_id === pastagem.id ? 'selected' : ''}>
                                        ${pastagem.nome}
                                    </option>`
                                ).join('')}
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="data_entrada">Data de Entrada</label>
                            <input type="date" id="data_entrada" value="${isEdit ? movimentacao.data_entrada : ''}" required>
                        </div>
                        <div class="form-group">
                            <label for="data_saida">Data de Saída (opcional)</label>
                            <input type="date" id="data_saida" value="${isEdit ? movimentacao.data_saida || '' : ''}">
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="modal.style.display='none'">Cancelar</button>
                            <button type="submit" class="btn btn-primary">${isEdit ? 'Atualizar' : 'Salvar'}</button>
                        </div>
                    </form>
                </div>
            `;
            
            document.getElementById('movimentacaoForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const newMovimentacao = {
                    id: isEdit ? movimentacao.id : sampleData.movimentacoes.length + 1,
                    animal_id: parseInt(document.getElementById('animal_id').value),
                    pastagem_id: parseInt(document.getElementById('pastagem_id').value),
                    data_entrada: document.getElementById('data_entrada').value,
                    data_saida: document.getElementById('data_saida').value || null
                };
                
                if (isEdit) {
                    const index = sampleData.movimentacoes.findIndex(m => m.id === movimentacao.id);
                    sampleData.movimentacoes[index] = newMovimentacao;
                } else {
                    sampleData.movimentacoes.push(newMovimentacao);
                }
                
                loadTableData('movimentacoes', sampleData.movimentacoes);
                modal.style.display = 'none';
                alert(isEdit ? 'Movimentação atualizada com sucesso!' : 'Movimentação criada com sucesso!');
            });
            
            modal.style.display = 'flex';
        }

        // Funções de edição (mantidas as mesmas)
        function editLancamento(id) {
            const lancamento = sampleData.lancamentos.find(l => l.id === id);
            if (lancamento) {
                showLancamentoForm(lancamento);
            }
        }

        function editAnimal(id) {
            const animal = sampleData.animais.find(a => a.id === id);
            if (animal) {
                showAnimalForm(animal);
            }
        }

        function editRebanho(id) {
            const rebanho = sampleData.rebanhos.find(r => r.id === id);
            if (rebanho) {
                showRebanhoForm(rebanho);
            }
        }

        function editPastagem(id) {
            const pastagem = sampleData.pastagens.find(p => p.id === id);
            if (pastagem) {
                showPastagemForm(pastagem);
            }
        }

        function editMovimentacao(id) {
            const movimentacao = sampleData.movimentacoes.find(m => m.id === id);
            if (movimentacao) {
                showMovimentacaoForm(movimentacao);
            }
        }

        // Funções de exclusão (mantidas as mesmas)
        function deleteLancamento(id) {
            if (confirm('Tem certeza que deseja excluir este lançamento?')) {
                sampleData.lancamentos = sampleData.lancamentos.filter(l => l.id !== id);
                loadTableData('lancamentos', sampleData.lancamentos);
                alert('Lançamento excluído com sucesso!');
            }
        }

        function deleteAnimal(id) {
            if (confirm('Tem certeza que deseja excluir este animal?')) {
                sampleData.animais = sampleData.animais.filter(a => a.id !== id);
                loadTableData('animais', sampleData.animais);
                alert('Animal excluído com sucesso!');
            }
        }

        function deleteRebanho(id) {
            if (confirm('Tem certeza que deseja excluir este rebanho?')) {
                sampleData.rebanhos = sampleData.rebanhos.filter(r => r.id !== id);
                loadTableData('rebanhos', sampleData.rebanhos);
                alert('Rebanho excluído com sucesso!');
            }
        }

        function deletePastagem(id) {
            if (confirm('Tem certeza que deseja excluir esta pastagem?')) {
                sampleData.pastagens = sampleData.pastagens.filter(p => p.id !== id);
                loadTableData('pastagens', sampleData.pastagens);
                alert('Pastagem excluída com sucesso!');
            }
        }

        function deleteMovimentacao(id) {
            if (confirm('Tem certeza que deseja excluir esta movimentação?')) {
                sampleData.movimentacoes = sampleData.movimentacoes.filter(m => m.id !== id);
                loadTableData('movimentacoes', sampleData.movimentacoes);
                alert('Movimentação excluída com sucesso!');
            }
        }

        // Funções auxiliares
        function formatDate(dateString) {
            const options = { day: '2-digit', month: '2-digit', year: 'numeric' };
            return new Date(dateString).toLocaleDateString('pt-BR', options);
        }

        // Adicionar estilos para badges
        const style = document.createElement('style');
        style.textContent = `
            .badge {
                display: inline-block;
                padding: 0.25em 0.6em;
                font-size: 0.75em;
                font-weight: 600;
                line-height: 1;
                text-align: center;
                white-space: nowrap;
                vertical-align: baseline;
                border-radius: 0.25rem;
            }
            .badge-success {
                color: #fff;
                background-color: var(--success);
            }
            .badge-danger {
                color: #fff;
                background-color: var(--danger);
            }
            .badge-secondary {
                color: #fff;
                background-color: var(--gray);
            }
            .page-content {
                display: none;
            }
            .page-content.active {
                display: block;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>